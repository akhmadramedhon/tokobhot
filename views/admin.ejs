<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">
    <nav class="mb-4">
        <a href="/" class="btn btn-primary">Kembali ke Toko</a>
    </nav>

    <h2>Data Transaksi Pembelian</h2>
    <table class="table table-bordered table-striped mt-3">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Produk</th>
                <th>Qty</th>
                <th>Waktu</th>
                <th>Status</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            <% transactions.forEach(t => { %>
                <tr>
                    <td><%= t.id %></td>
                    <td><%= t.name %></td>
                    <td><%= t.quantity %></td>
                    <td><%= t.date %></td>
                    <td>
                        <span class="badge bg-<%= t.status === 'success' ? 'success' : 'danger' %>">
                            <%= t.status %>
                        </span>
                    </td>
                    <td>
                        <% if(t.status === 'success') { %>
                            <form action="/cancel" method="POST" onsubmit="return confirm('Yakin cancel order ini? Stok akan dikembalikan.');">
                                <input type="hidden" name="transaction_id" value="<%= t.id %>">
                                <input type="hidden" name="product_id" value="<%= t.product_id %>">
                                <input type="hidden" name="quantity" value="<%= t.quantity %>">
                                <button type="submit" class="btn btn-sm btn-danger">Cancel Order</button>
                            </form>
                        <% } else { %>
                            <span class="text-muted">-</span>
                        <% } %>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</body>
</html>